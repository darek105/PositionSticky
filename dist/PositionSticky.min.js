var Container={create:function(t){return Object.create(Container)._init(t)},_init:function(t){return this.constructor=Container,this._window=window,this.element=t,this.paddingTop=null,this.paddingBottom=null,this.borderTopWidth=null,this.borderBottomWidth=null,this._validatePosScheme(),this._setLayoutProperties(),this},_validatePosScheme:function(){var t=this.element.style.position;"relative"!=t&&"absolute"!=t&&(this.element.style.position="relative")},_setLayoutProperties:function(){var t=this._window.getComputedStyle(this.element);this.paddingTop=parseInt(t.paddingTop,10),this.paddingBottom=parseInt(t.paddingBottom,10),this.borderTopWidth=parseInt(t.borderTopWidth,10),this.borderBottomWidth=parseInt(t.borderBottomWidth,10)}},Placeholder={create:function(t){return Object.create(Placeholder)._init(t)},_init:function(t){return this.constructor=Placeholder,this._window=window,this._sticky=t,this.element=null,this._createElement(),this},_createElement:function(){var t=document.createElement("DIV"),e=this._sticky.element.getBoundingClientRect().width+"px",i=this._sticky.boundingBoxHeight+"px",n=this._window.getComputedStyle(this._sticky.element).margin,o=this._window.getComputedStyle(this._sticky.element).float;t.style.display="none",t.style.width=e,t.style.height=i,t.style.margin=n,t.style.float=o,this._sticky.element.parentNode.insertBefore(t,this._sticky.element),this.element=t},refresh:function(){this.element.style.height=this._sticky.boundingBoxHeight+"px"}},PositionSticky={POS_SCHEME_STATIC:100,POS_SCHEME_FIXED:200,POS_SCHEME_ABSOLUTE:300,create:function(t,e){return"undefined"==typeof e&&(e={}),Object.create(PositionSticky)._init(t,e)},_init:function(t,e){return this.constructor=PositionSticky,this._window=window,this._sticky=Sticky.create(t),this._container=Container.create(t.parentNode),this._placeholder=null,this._posScheme=PositionSticky.POS_SCHEME_STATIC,this._isTicking=!1,this._threshold=null,this._options=e,this._leftPositionWhenAbsolute=null,this._leftPositionWhenFixed=null,this._latestKnownScrollY=this._window.pageYOffset,this._setOffsetTop(),this._setOffsetBottom(),this._calcThreshold(),this._setLeftPositionWhenAbsolute(),this._setLeftPositionWhenFixed(),this._createPlaceholder(),this._subscribeToWindowScroll(),this},_setOffsetTop:function(){this.offsetTop="number"==typeof this._options.offsetTop&&this._options.offsetTop>=0?this._options.offsetTop:this._container.borderTopWidth+this._container.paddingTop},_setOffsetBottom:function(){this.offsetBottom=this._container.borderBottomWidth+this._container.paddingBottom},_calcThreshold:function(){this._threshold=this._getStickyDistanceFromDocumentTop()-this.offsetTop},_setLeftPositionWhenAbsolute:function(){var t=parseInt(this._window.getComputedStyle(this._sticky.element).marginLeft,10);this._leftPositionWhenAbsolute=this._sticky.element.offsetLeft-t},_setLeftPositionWhenFixed:function(){var t=parseInt(this._window.getComputedStyle(this._sticky.element).marginLeft,10);this._leftPositionWhenFixed=this._window.pageXOffset+this._sticky.element.getBoundingClientRect().left-t},_createPlaceholder:function(){this._placeholder=Placeholder.create(this._sticky)},_subscribeToWindowScroll:function(){this._window.addEventListener("scroll",this._onScroll.bind(this))},_onScroll:function(){this._isTicking||(this._latestKnownScrollY=this._window.pageYOffset,this._window.requestAnimationFrame(this._update.bind(this)),this._isTicking=!0)},_isStatic:function(){return this._posScheme===PositionSticky.POS_SCHEME_STATIC},_makeStatic:function(){this._sticky.element.style.position="static",this._placeholder.element.style.display="none",this._posScheme=PositionSticky.POS_SCHEME_STATIC},_isFixed:function(){return this._posScheme===PositionSticky.POS_SCHEME_FIXED},_makeFixed:function(){this._sticky.element.style.bottom=null,this._sticky.element.style.position="fixed",this._sticky.element.style.top=this.offsetTop+"px",this._sticky.element.style.left=this._leftPositionWhenFixed+"px",this._placeholder.element.style.display="block",this._posScheme=PositionSticky.POS_SCHEME_FIXED},_isAbsolute:function(){return this._posScheme===PositionSticky.POS_SCHEME_ABSOLUTE},_makeAbsolute:function(){this._sticky.element.style.top=null,this._sticky.element.style.position="absolute",this._sticky.element.style.bottom=this._container.paddingBottom+"px",this._sticky.element.style.left=this._leftPositionWhenAbsolute+"px",this._placeholder.element.style.display="block",this._posScheme=PositionSticky.POS_SCHEME_ABSOLUTE},_update:function(){this._isTicking=!1,this._isBelowThreshold()?this._isStatic()||this._makeStatic():this._canStickyFitInContainer()?this._isFixed()||this._makeFixed():this._isAbsolute()||this._makeAbsolute()},_isBelowThreshold:function(){return this._latestKnownScrollY<this._threshold?!0:!1},_canStickyFitInContainer:function(){return this._getAvailableSpaceInContainer()>=this._sticky.boundingBoxHeight},_getAvailableSpaceInContainer:function(){return this._container.element.getBoundingClientRect().bottom-this.offsetBottom-this.offsetTop},_getStickyDistanceFromDocumentTop:function(){var t=this._isStatic()?this._sticky.element:this._placeholder.element,e=this._latestKnownScrollY+t.getBoundingClientRect().top;return e},refresh:function(){this._calcThreshold(),this._sticky.refresh(),this._placeholder.refresh()}},Sticky={create:function(t){return Object.create(Sticky)._init(t)},_init:function(t){return this.constructor=Sticky,this._window=window,this.element=t,this.boundingBoxHeight=null,this._setElementWidth(),this._setBoundingBoxHeight(),this},_setElementWidth:function(){var t=this._window.getComputedStyle(this.element).width;this.element.style.width=t},_setBoundingBoxHeight:function(){this.boundingBoxHeight=this.element.getBoundingClientRect().height},refresh:function(){this._setBoundingBoxHeight()}};!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+n)},n);return t=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();